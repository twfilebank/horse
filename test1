<!DOCTYPE html>
<html>
<head>
    <title>赛马游戏</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        #game-container {
            width: 390px;
            height: 844px;
            text-align: center;
        }

        #race-track {
            width: 375px;
            height: 600px;
            position: relative;
            margin-bottom: 20px;
            background-color: #ccc;
        }

        .horse {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: red;
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            z-index: 1;
        }

        .winner {
            background-color: green;
            z-index: 2;
        }

        .finish-line {
            position: absolute;
            top: 0;
            right: 0;
            height: 100%;
            width: 5px;
            background-color: black;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>赛马游戏</h1>

        <div id="race-track"></div>
        <h3 id="result-heading">比赛结果:</h3>
        <p id="winner-info"></p>
        <button onclick="startGame()">启动游戏</button>
        <button onclick="endGame()">停止游戏</button>
    </div>

    <script>
        // 游戏设置
        var horseCount = 10;
        var raceTrackWidth = 375;
        var raceDuration = 15; // 游戏持续时间（秒）

        var horses = [];
        var gameTimer;

        function startGame() {
            horses = [];
            var raceTrack = document.getElementById('race-track');
            raceTrack.innerHTML = '';

            // 生成马匹
            for (var i = 0; i < horseCount; i++) {
                var horse = document.createElement('div');
                horse.className = 'horse';
                horse.innerText = i + 1;
                horse.style.top = (i * 60) + 'px';
                raceTrack.appendChild(horse);
                horses.push(horse);
            }

            var finishLine = document.createElement('div');
            finishLine.className = 'finish-line';
            raceTrack.appendChild(finishLine);

            gameTimer = setInterval(moveHorses, 1000);

            setTimeout(endGame, raceDuration * 1000);
        }

        function moveHorses() {
            horses.forEach(function (horse) {
                var distance = Math.floor(Math.random() * 25); // 随机生成每次前进的距离

                var currentPosition = parseInt(horse.style.left) || 0;
                var newPosition = currentPosition + distance;

                if (newPosition > raceTrackWidth) {
                    newPosition = raceTrackWidth;
                }

                horse.style.left = newPosition + 'px';
            });
        }

        function checkWinner() {
            var winnerIndex = -1;
            var maxPosition = -1;

            horses.forEach(function (horse, index) {
                var currentPosition = parseInt(horse.style.left) || 0;

                if (currentPosition > maxPosition) {
                    maxPosition = currentPosition;
                    winnerIndex = index;
                }
            });

            var winnerHorse = horses[winnerIndex];
            winnerHorse.classList.add('winner');

            horses.forEach(function (horse, index) {
                if (index !== winnerIndex) {
                    horse.style.backgroundColor = 'red';
                    horse.classList.remove('winner');
                }
            });

            var winnerNumber = winnerIndex + 1;
            var winnerInfo = document.getElementById('winner-info');
            winnerInfo.textContent = '第一名马匹编号: ' + winnerNumber;
        }

        function endGame() {
            clearInterval(gameTimer);
            checkWinner();
        }
    </script>
</body>
</html>
